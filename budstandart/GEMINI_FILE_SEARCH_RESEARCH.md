# Gemini File Search API - –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è

**–î–∞—Ç–∞:** 2025-11-13
**Issue:** BT-9x1
**–î–∂–µ—Ä–µ–ª–∞:** [File Search docs](https://ai.google.dev/gemini-api/docs/file-search), [API Reference](https://ai.google.dev/api/file-search/)

---

## –ö–ª—é—á–æ–≤—ñ –≤–∏—Å–Ω–æ–≤–∫–∏

### 1. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤: PDF === MD ===  TXT

**–ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è 100+ MIME types:**
- Application formats: PDF, DOCX, XLSX, PPTX, code files
- Text formats: TXT, MD, HTML, CSS, JSON, XML, YAML

**–ö–†–ò–¢–ò–ß–ù–û:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è **–ù–ï –∫–∞–∂–µ** —â–æ –æ–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç –∫—Ä–∞—â–∏–π –∑–∞ —ñ–Ω—à–∏–π. –í—Å—ñ –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è –≤ embeddings –¥–ª—è semantic search.

### 2. –û–±—Ä–æ–±–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π pipeline:**
```
Upload ‚Üí Chunking ‚Üí Embeddings (gemini-embedding-001) ‚Üí Storage
```

- Chunking –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `chunkingConfig` (max_tokens_per_chunk, max_overlap_tokens)
- Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- Semantic search –ø—Ä–∞—Ü—é—î –ø–æ embeddings, **–Ω–µ –ø–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ**

### 3. –û–±–º–µ–∂–µ–Ω–Ω—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è |
|----------|----------|
| Max file size | 100 MB |
| Free tier storage | 1 GB |
| Paid tiers | 10GB / 100GB / 1TB |
| Recommended store size | < 20 GB (–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ latency) |
| Backend overhead | 3√ó input size (embeddings) |
| Max custom metadata | 20 key-value pairs per document |

### 4. Pricing

- **–Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è:** $0.15 per 1M tokens (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ –ø—Ä–∏ upload)
- **Storage:** –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ
- **Query embeddings:** –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ
- **Retrieved tokens:** —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π context (model pricing)

### 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö vs —á–∏—Å—Ç–∏–π —Ç–µ–∫—Å—Ç

**–©–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ù–ï –∫–∞–∂–µ:**
- –Ø–∫ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ñ –≤ PDF vs MD
- –ß–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—å –≤ embeddings
- –Ø–∫—ñ—Å—Ç—å search –¥–ª—è structured data

**–©–æ –≤—ñ–¥–æ–º–æ:**
- PDF —ñ MD –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç–æ–π —Å–∞–º–∏–π embedding model
- Chunking —Ä–æ–∑–±–∏–≤–∞—î –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —à–º–∞—Ç–∫–∏ (–Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ñ–æ—Ä–º–∞—Ç—É)
- Citations –ø–æ–∫–∞–∑—É—é—Ç—å –¥–∂–µ—Ä–µ–ª–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

---

## –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è: PDF —á–∏ MD?

### –ó–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é:

**PDF:**
- ‚úÖ –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (source of truth)
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –Ω–∞—Ç–∏–≤–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π chunking
- ‚ùì –Ø–∫ –ø–∞—Ä—Å—è—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ñ - –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ

**Markdown:**
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –Ω–∞—Ç–∏–≤–Ω–æ
- ‚úÖ –ß–∏—Å—Ç—ñ—à–∏–π —Ç–µ–∫—Å—Ç (–ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –∫—Ä–∞—â–∏–π chunking)
- ‚ùì –¢–∞–±–ª–∏—Ü—ñ –≤ MD format - —è–∫ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è?
- ‚ùå –ü–æ—Ç—Ä–µ–±—É—î conversion (–¥–æ–¥–∞—Ç–∫–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å)

### –í–∏—Å–Ω–æ–≤–æ–∫

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∫–∞–∂–µ: –æ–±–∏–¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏ —Ä—ñ–≤–Ω–æ—Ü—ñ–Ω–Ω—ñ.**

–†—ñ–∑–Ω–∏—Ü—è –º–æ–∂–µ –±—É—Ç–∏ –≤:
1. **Chunking quality** - —è–∫ —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —à–º–∞—Ç–∫–∏
2. **Table parsing** - —è–∫ –≤–∏—Ç—è–≥—É—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –∑ —Ç–∞–±–ª–∏—Ü—å

–ê–ª–µ —Ü–µ **–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ** —ñ –ø–æ—Ç—Ä–µ–±—É—î **–ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 1. –î–ª—è KRTM –ø—Ä–æ—î–∫—Ç—É (11 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ PDF:**
- –ü—Ä–æ—Å—Ç—ñ—à–µ (no conversion pipeline)
- –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (source of truth)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –Ω–µ –¥–∞—î –ø–µ—Ä–µ–≤–∞–≥ MD
- –ú–æ–∂–Ω–∞ —à–≤–∏–¥–∫–æ —Å—Ç–∞—Ä—Ç—É–≤–∞—Ç–∏

### 2. –î–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ (–µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)

**–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —è–∫—â–æ:**
- Upload —Ç–æ–π —Å–∞–º–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —è–∫ PDF —ñ —è–∫ MD
- –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ search quality –Ω–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö –ø—Ä–æ —Ç–∞–±–ª–∏—Ü—ñ
- –í–∏–º—ñ—Ä—è—Ç–∏ chunking quality (—Å–∫—ñ–ª—å–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤ –æ–¥–Ω–æ–º—É chunk)
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ citations (—á–∏ –∫—Ä–∞—â–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤ MD)

**–Ø–∫—â–æ MD –≤–∏—è–≤–∏—Ç—å—Å—è –∫—Ä–∞—â–µ:**
- Implement conversion pipeline (pdf2docx ‚Üí pandoc –∞–±–æ marker-pdf)
- Dual storage: pdf/ (–æ—Ä–∏–≥—ñ–Ω–∞–ª–∏) + md/ (–¥–ª—è Gemini + git)

### 3. Metadata strategy

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ custom metadata –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó:**
```json
{
  "document_type": "DBN|DSTU",
  "year": "2020",
  "tom": "1|2|3|4",
  "priority": "P1|P2"
}
```

–¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏: "—Ç—ñ–ª—å–∫–∏ –î–ë–ù –∑ –¢–æ–º—É 3" –∞–±–æ "—Ç—ñ–ª—å–∫–∏ P1 –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑ 2018+".

---

## API Methods (–¥–ª—è reference)

### FileSearchStore
- `create` - —Å—Ç–≤–æ—Ä–∏—Ç–∏ store
- `delete` - –≤–∏–¥–∞–ª–∏—Ç–∏ store
- `get` - –æ—Ç—Ä–∏–º–∞—Ç–∏ info
- `list` - —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö stores
- `importFile` - —ñ–º–ø–æ—Ä—Ç –∑ File Service
- `uploadToFileSearchStore` - –ø—Ä—è–º–∏–π upload

### Documents
- `delete` - –≤–∏–¥–∞–ª–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç
- `get` - –æ—Ç—Ä–∏–º–∞—Ç–∏ info
- `list` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- `query` - **semantic search –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É**

### Chunking Config
```javascript
{
  max_tokens_per_chunk: 800,  // default: –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ model
  max_overlap_tokens: 100     // default: 0
}
```

---

## –©–æ –ù–ï –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

‚ùå Benchmarks PDF vs MD –¥–ª—è search quality
‚ùå –Ø–∫ –ø–∞—Ä—Å—è—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ñ –≤ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
‚ùå Recommended formats –¥–ª—è technical documentation
‚ùå Examples –∑ structured data (tables, diagrams)
‚ùå Latency metrics –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤
‚ùå Best practices –¥–ª—è –î–°–¢–£/–î–ë–ù —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ü–æ—Ç—Ä–µ–±—É—î –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è technical docs –∑ —Ç–∞–±–ª–∏—Ü—è–º–∏.

---

## Next Steps

1. ‚úÖ Upload 11 PDF –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —è–∫ —î
2. ‚úÖ –î–æ–¥–∞—Ç–∏ metadata (type, year, tom, priority)
3. ‚úÖ –ü–æ—á–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è KRTM
4. üîÑ –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ MD conversion –Ω–∞ 1-2 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

**Default strategy: PDF (–æ—Ä–∏–≥—ñ–Ω–∞–ª–∏), experimental: MD —è–∫—â–æ –≤–∏—è–≤–∏—Ç—å—Å—è –∫—Ä–∞—â–∏–º.**
